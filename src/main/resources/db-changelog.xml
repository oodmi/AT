<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="0" author="Dmitry" failOnError="false">
        <sql splitStatements="true">
            DROP TABLE IF EXISTS book CASCADE;
        </sql>
        <sql splitStatements="true">
            DROP TABLE IF EXISTS user CASCADE;
        </sql>
    </changeSet>

    <changeSet author="Dmitry" id="1">
        <createTable tableName="user">
            <column name="id" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="login" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="password" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addAutoIncrement tableName="user" columnName="id"
                          columnDataType="int"
                          incrementBy="1"
                          startWith="1"/>
    </changeSet>

    <changeSet author="Dmitry" id="2">
        <createTable tableName="BOOK">
            <column name="isn" type="int">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="author" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="ownerId" type="int">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="3" author="Dmitry">
        <addForeignKeyConstraint baseTableName="BOOK" baseColumnNames="ownerId" constraintName="ownerId"
                                 referencedTableName="user"
                                 referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="4" author="Dmitry">
        <insert tableName="user">
            <column name="login">Dmitry</column>
            <column name="password">Lolka</column>
        </insert>
        <insert tableName="user">
            <column name="login">Vasy</column>
            <column name="password">Lolka</column>
        </insert>
        <insert tableName="user">
            <column name="login">Anny</column>
            <column name="password">Lolka</column>
        </insert>
        <insert tableName="user">
            <column name="login">Admin</column>
            <column name="password">Lolka</column>
        </insert>
    </changeSet>

    <changeSet id="5" author="Dmitry">
        <insert tableName="BOOK">
            <column name="isn">1</column>
            <column name="author">Pushkin A.</column>
            <column name="name">Interesting book 1</column>
            <column name="ownerId">1</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">2</column>
            <column name="author">Fet A.</column>
            <column name="name">Interesting book 2</column>
            <column name="ownerId">1</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">3</column>
            <column name="author">Rai K.</column>
            <column name="name">Interesting book 3</column>
            <column name="ownerId">2</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">4</column>
            <column name="author">Kel M.</column>
            <column name="name">Interesting book 4</column>
            <column name="ownerId">2</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">5</column>
            <column name="author">Ner L.</column>
            <column name="name">Interesting book 5</column>
            <column name="ownerId"></column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">6</column>
            <column name="author">Someone R.</column>
            <column name="name">Interesting book 6</column>
            <column name="ownerId">3</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">7</column>
            <column name="author">Dmitry O.</column>
            <column name="name">Interesting book 7</column>
            <column name="ownerId">4</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">8</column>
            <column name="author">J Li</column>
            <column name="name">Interesting book 8</column>
            <column name="ownerId">2</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">9</column>
            <column name="author">Li J</column>
            <column name="name">Interesting book 9</column>
            <column name="ownerId">3</column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">10</column>
            <column name="author">Kai P.</column>
            <column name="name">Interesting book 10</column>
            <column name="ownerId"></column>
        </insert>
        <insert tableName="BOOK">
            <column name="isn">11</column>
            <column name="author">Li M.</column>
            <column name="name">Interesting book 11</column>
            <column name="ownerId"></column>
        </insert>
    </changeSet>

</databaseChangeLog>